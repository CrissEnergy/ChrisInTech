{
  "entities": {
    "Project": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Project",
      "type": "object",
      "description": "Represents a project showcased on the portfolio.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the project."
        },
        "title": {
          "type": "string",
          "description": "The title of the project."
        },
        "description": {
          "type": "string",
          "description": "A short description of the project."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL to the project's image.",
          "format": "uri"
        },
        "technologies": {
          "type": "array",
          "description": "List of technologies used in the project.",
          "items": {
            "type": "string"
          }
        },
        "liveLink": {
          "type": "string",
          "description": "URL to the live demo of the project.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "imageUrl",
        "technologies",
        "liveLink"
      ]
    },
    "Skill": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Skill",
      "type": "object",
      "description": "Represents a skill of the developer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the skill."
        },
        "name": {
          "type": "string",
          "description": "The name of the skill."
        },
        "category": {
          "type": "string",
          "description": "Category of the skill (e.g., Frontend, Backend, Tools)."
        },
        "iconClass": {
          "type": "string",
          "description": "CSS class for the skill's icon (e.g., Font Awesome class)."
        }
      },
      "required": [
        "id",
        "name",
        "category",
        "iconClass"
      ]
    },
    "ContactMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactMessage",
      "type": "object",
      "description": "Represents a message sent through the contact form.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact message."
        },
        "name": {
          "type": "string",
          "description": "Name of the sender."
        },
        "email": {
          "type": "string",
          "description": "Email address of the sender.",
          "format": "email"
        },
        "message": {
          "type": "string",
          "description": "The message content."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp when the message was sent.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "message",
        "timestamp"
      ]
    },
    "SiteProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SiteProfile",
      "type": "object",
      "description": "Represents general profile settings for the website.",
      "properties": {
        "aboutImageUrl": {
          "type": "string",
          "description": "URL to the profile image for the About Me section.",
          "format": "uri"
        }
      },
      "required": [
        "aboutImageUrl"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/projects/{documentId}",
        "definition": {
          "entityName": "Project",
          "schema": {
            "$ref": "#/backend/entities/Project"
          },
          "description": "Stores project data. Accessible only to admins. Requires admin privileges for all operations.",
          "params": [
            {
              "name": "documentId",
              "description": "Unique identifier for the project document."
            }
          ]
        }
      },
      {
        "path": "/skills/{documentId}",
        "definition": {
          "entityName": "Skill",
          "schema": {
            "$ref": "#/backend/entities/Skill"
          },
          "description": "Stores skill data. Accessible only to admins. Requires admin privileges for all operations.",
          "params": [
            {
              "name": "documentId",
              "description": "Unique identifier for the skill document."
            }
          ]
        }
      },
      {
        "path": "/contact_messages/{documentId}",
        "definition": {
          "entityName": "ContactMessage",
          "schema": {
            "$ref": "#/backend/entities/ContactMessage"
          },
          "description": "Stores contact messages. Accessible only to admins. Requires admin privileges for all operations.",
          "params": [
            {
              "name": "documentId",
              "description": "Unique identifier for the contact message document."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "roles_admin",
          "schema": {
            "$ref": "#/backend/entities/roles_admin"
          },
          "description": "Collection to store UIDs of admin users. Presence in this collection grants admin privileges.",
          "params": [
            {
              "name": "userId",
              "description": "The UID of the admin user."
            }
          ]
        }
      },
      {
        "path": "/settings/profile",
        "definition": {
          "entityName": "SiteProfile",
          "schema": {
            "$ref": "#/backend/entities/SiteProfile"
          },
          "description": "A single document to store site-wide profile settings. Restricted to admin access.",
          "singleton": true
        }
      }
    ],
    "reasoning": "This Firestore structure is designed for the 'Chris In Tech Portfolio' application, focusing on admin management of projects, skills, and contact messages. It prioritizes security, scalability, and debuggability by adhering to the principles of Authorization Independence, Clarity of Intent, DBAC (Database-Based Access Control), QAPs (Rules are not Filters), and Invariants.\n\n**Authorization Independence:** The structure assumes an administrative role, stored in the `roles_admin` collection, granting full access to manage projects, skills, and contact messages. This avoids hierarchical authorization dependencies by checking for the existence of the user's UID in the `roles_admin` collection. No `get()` calls are required in security rules to validate admin privileges.\n\n**Structural Segregation:** Each collection (`projects`, `skills`, `contact_messages`) is dedicated to a specific entity type, ensuring homogeneous security postures within each collection. This allows for simpler and more focused security rules.\n\n**Access Modeling:** Global roles are managed using the `roles_admin` collection. The presence of a user's UID in this collection signifies admin privileges. This approach favors Existence over Content for role validation.\n\n**Data Clarity and Predictability:** The schema uses explicit and semantic naming conventions for collections and fields. For example, `projects`, `skills`, and `contact_messages` clearly indicate the data stored in each collection.  Wildcards like `{documentId}` are used generically, indicating a unique document ID within each collection.\n\nThis structure enables robust security rules by making authorization context explicit. The absence of hierarchical dependencies ensures atomic operations and eases debugging. The clear separation of data based on entity type simplifies rule management and facilitates secure list operations."
  }
}
